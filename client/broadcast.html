<!DOCTYPE html>
<html>
<head>

<meta name='keywords' content='WebRTC, HTML5, JavaScript' />
<meta name='description' content='WebRTC Reference App' />
<meta name='viewport' content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1'>

<base target='_blank'>

<title>WebRTC client</title>

<link rel='stylesheet' href='css/main.css' />

</head>

<body>

<div id='container'>
  <div id='participants'>
  </div>
  <canvas id="photo" style="display: none;"></canvas> 

  <button id="disable-audio">Disable Audio</button>
  <button id="enable-audio" hidden="hidden">Enable Audio</button>
  <button id="disable-video">Disable Video</button>
  <button id="enable-video" hidden="hidden">Enable Video</button>
  <button id="snapshot">Snapshot</button>
  <button id="share-screen">Share Screen</button>
  <button id="start-record">Record Video</button>
  <button id="stop-record" hidden="hidden">Stop Video</button>
  <br>
  <video id="video" autoplay controls ></video>
  <audio id="audio" autoplay></audio>
  <h2 id="video-url-preview"></h2>
  <h2 id="audio-url-preview"></h2>

  <textarea id="chatbox"></textarea>
  <input id="dataChannelSend" type="text" size="63" disabled placeholder="Enter some text, then press Send."/>
  <button id="sendButton" disabled>Send</button>
  
	<!--<textarea id="dataChannelReceive" disabled></textarea> -->
</div>

<script src='js/socket.io/socket.io.js'></script>
<script src='js/lib/adapter.js'></script>
<script src="js/jquery/jquery-2.1.1.min.js"></script>
<script src='js/main.js'></script>
<script src="http://www.nihilogic.dk/labs/canvas2image/canvas2image.js"></script>
<script src="//cdn.WebRTC-Experiment.com/RecordRTC.js"></script>

<script type="text/javascript">
$('#share-screen').click(function() {
      getUserMedia({
                video: {
                    mandatory: {
                        chromeMediaSource: 'screen',
                        maxWidth: 1280,
                        maxHeight: 720
                    },
                    optional: []
                }
              }, function(stream) {
                    document.getElementById('video').src = window.URL.createObjectURL(stream);;
                    $('#share_screen').hide();
                }, function() {
                    alert('Error, my friend. Screen stream is not available. Try in latest Chrome with Screen sharing enabled in about:flags.');
                  }
            )
      });
</script>
</body>
</html>
